DROP DATABASE IF EXISTS rutas_turisticas;
CREATE DATABASE rutas_turisticas;
USE rutas_turisticas;

CREATE TABLE usuario (
  id_usuario INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  nombre VARCHAR(64) NOT NULL,
  usuario VARCHAR(32) NOT NULL,
  correo VARCHAR(64) NOT NULL,
  fecha_registro DATE NOT NULL,
  contrasenia VARCHAR(64) NOT NULL,
  tipo_usuario INT NOT NULL
);
CREATE TABLE ruta (
  id_ruta INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_usuario INT NOT NULL,
  nombre_ruta VARCHAR(64) NOT NULL,
  descripcion VARCHAR(255) NOT NULL,
  lugar_principal VARCHAR(32) NOT NULL,
  imagen_1 VARCHAR(200) NULL,
  imagen_2 VARCHAR(200) NULL,
  costo INT NOT NULL,
  actividad_1 VARCHAR(200) NOT NULL,
  actividad_2 VARCHAR(200) NOT NULL,
  hotel VARCHAR(64) NOT NULL,
  FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario) ON UPDATE CASCADE
);
CREATE TABLE comentario (
  id_comentario INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_ruta INT NOT NULL,
  id_usuario INT NOT NULL,
  comentario VARCHAR(255) NOT NULL,
  calificacion INT NOT NULL,
  FOREIGN KEY (id_ruta) REFERENCES ruta(id_ruta) ON UPDATE CASCADE,
  FOREIGN KEY (id_usuario) REFERENCES usuario(id_usuario) ON UPDATE CASCADE
);
CREATE TABLE punto (
  id_punto INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  id_ruta INT NOT NULL,
  nombre_punto VARCHAR(128) NOT NULL,
  localizacion VARCHAR(128) NOT NULL,
  descripcion VARCHAR(255) NOT NULL,
  actividad VARCHAR(255) NOT NULL,
  imagen VARCHAR(200) NULL,
  FOREIGN KEY (id_ruta) REFERENCES ruta(id_ruta) ON UPDATE CASCADE
);

INSERT INTO usuario (nombre, usuario, correo, fecha_registro, contrasenia, tipo_usuario)
VALUES ('Juan Martínez', 'admin_1', 'admin-1@test.com', '2022-04-30', 12345, 0);
INSERT INTO usuario (nombre, usuario, correo, fecha_registro, contrasenia, tipo_usuario)
VALUES ('Mario Pérez', 'admin_2', 'admin-2@test.com', '2022-04-30', 123456, 0);